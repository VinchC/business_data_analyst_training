### Examen 101 : Python pour l'Analyse de Données

### Consignes

L'exercice est composé de plusieurs questions, **faites-les dans l'ordre et faites attention à respecter le nom des variables**. La majorité des questions sont indépendantes.

Évitez de rester bloqué plus de 5 minutes sur la même question.

Un code clair et commenté si nécessaire, sera apprécié.

Si vous rencontrez des problèmes, merci de consulter le lien suivant : https://help.datascientest.com/fr/b2c/knowledgebase/comment-contacter-le-support.

### Exploration du Jeu de données

Cette évaluation porte sur le jeu de données contenue dans le fichier **`"german_credit_data.csv"`**. Ce dernier contient des informations sur plus de 1000 individus ayant souscrits à un prêt bancaire. **La variable `"duration"` indique la durée de l'emprunt en mois.**

Le principal objectif de l'examen est d'utiliser des méthodes d'exploration, de manipulation et de préparation de données dans l'optique de répondre à des questions business liées à ce jeu de données.

- **(a)** Importer le module **`pandas`** sous l'alias **`pd`**.

- **(b)** Lire le fichier **`"german_credit_data.csv"`** dans un `DataFrame` appelé **`df`** en précisant que **la première colonne contient les indices**.

- **(c)** Afficher un aperçu et une première description des variables du jeu de données.

# Insérez votre code ici

Les variables **`purpose`** et **`credit_amount`** renseignent respectivement le motif du prêt contracté par un individu et le montant du crédit.

- **(d)** Quel est le montant maximal du crédit suivant les différents motifs invoqués ?

# Insérez votre code ici

- **(e)** Quel est le motif revenant le plus souvent ?

# Insérez votre code ici

- **(f)** Afficher les informations concernant l'individu le plus âgé. Quelle est la durée de son prêt ?

- **(g)** Qu'en est-il de l'individu le plus jeune ?

# Insérez votre code ici

- **(h)** La variable **`duration`** renseigne la durée des emprunts. Transformez-la en variable numérique en supprimant la sous-chaîne de caractères **`"-month"`** pour chaque individu, puis en convertissant le type des valeurs en **`int`**.

Pour cette question, vous pourrez appliquer à chaque observation de la colonne duration une fonction qui supprime les 6 derniers éléments.

# Insérez votre code ici

- **(i)** Créer une nouvelle variable nommée **`duration_categ`** contenant 3 modalités :
  - **`court-terme`** pour tous les prêts d'une durée **inférieure ou égale** à **10** mois.
  - **`moyen-terme`** pour tous les prêts d'une durée **strictement supérieure** à **10** mois et **inférieure ou égale** à **30** mois.
  - **`long-terme`** pour tous les prêts d'une durée **strictement supérieure** à **30** mois.

# Insérez votre code ici

La variable **`housing`** renseigne 3 catégories : **own** (propriétaire), **rent** (locataire) et **free** (logé gratuitement).

- **(j)** Quelle est la catégorie de prêt la plus courante chez les locataires ?

# Insérez votre code ici

### Préparation des données

La phase de préparation des données regroupe les activités liées à la construction de l'ensemble précis des données à analyser à partir des données brutes. Elle inclut ainsi le classement des données en fonction de critères choisis, le nettoyage des données, et surtout leur encodage pour les rendre compatibles avec les algorithmes qui seront utilisés.

- **(k)** Pour la colonne **`"saving_accounts"`**, remplacer les modalités **`'little'`**, **`'moderate'`**, **`'quite rich'`** et **`'rich'`** par **`0`**, **`1`**, **`2`** et **`3`**.

# Insérez votre code ici

- **(l)** Pour la variable `checking_account`, remplacer les modalités **`'little'`**, **`'moderate'`**, **`'quite rich'`** et **`'rich'`** par **`0`**, **`1`**, **`2`** et **`3`**.

# Insérez votre code ici

- **(m)** Remarquez-vous la présence de doublons dans les données ?

# Insérez votre code ici

- **(n)** Afficher le nombre de valeurs manquantes pour chaque colonne de **`df`**.

# Insérez votre code ici

Certaines variables comme `'housing'` ou `'purpose'` sont des variables dites **catégorielles**. En effet, elles contiennent un nombre fini de modalités (3 pour la première par exemple).

Dans ce cas, il est possible de remplacer les valeurs manquantes dans ces colonnes par **l'élément le plus fréquent**.

En statistiques, cette valeur s'appelle le **mode**, et la méthode **`mode`** d'une `Series` pandas permet de retourner cette valeur. **Attention**, cette méthode renvoie une **`Series`**, et non une valeur numérique.

- **(o)** Dans **`df`**, remplacer les valeurs manquantes de la colonne **`"housing"`** par le mode de cette colonne.

# Insérez votre code ici

- **(p)** Dans **`df`**, remplacer les valeurs manquantes de la colonne **`"age"`** par la **moyenne** de cette colonne.

# Insérez votre code ici

### Apprentissage des données

Une équipe de Data Scientists a déjà entraîné un modèle de régression prédictif sur des données en plus grand nombre et identiques aux données sur lesquelles vous avez travaillé.

Après envoi de vos données sans la colonne **`"duration"`** ils ont essayé de prédire la durée des prêts de vos 1000 individus.

Les résultats des prédictions sont disponibles dans le fichier **`'predictions_german.csv'`**, qui contient également l'ID des clients.

- **(q)** Lire le fichier **`'predictions_german.csv'`** dans un `DataFrame` appelé **`pred_german`** en précisant que la première colonne contient les indices.

- **(r)** En fusionnant **`df`** et **`pred_german`**, créer un `Dataframe` nommé **`df_pred`** contenant les informations dont nous disposons ainsi que les prédictions sur les 1000 individus.

# Insérez votre code ici

### Évaluation du modèle de régression

- **(s)** Créer une nouvelle colonne `"error"` dans **`df_pred`** renseignant la différence entre les variables `"duration"` et `"predictions"`.

# Insérez votre code ici

- **(t)** Combien d'individus ont vu leur durée de prêt surestimée par le modèle ? (c'est-à-dire que la durée prédite par le modèle est **supérieure** à la durée réelle du prêt)

# Insérez votre code ici
